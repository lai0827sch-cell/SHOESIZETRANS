<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <link rel="icon" href="favicon.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Shoes Size Transform V.1</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#fbfbfd">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.7);
            --liquid-purple: #9370db;
            --ios-blue: #007AFF;
            --text-main: #1c1c1e;
            --bg-color: #fbfbfd;
            --item-active: rgba(0,0,0,0.12);
            --glass-stroke: rgba(255,255,255,0.4);
            --tab-active-bg: rgba(0, 122, 255, 0.35);
            --tab-active-duration: 0.4s;
        }
        [data-theme="dark"] {
            --glass: rgba(28, 28, 30, 0.7);
            --text-main: #ffffff;
            --bg-color: #000000;
            --item-active: rgba(255,255,255,0.18);
            --glass-stroke: rgba(255,255,255,0.1);
            --tab-active-bg: rgba(0, 122, 255, 0.5);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
            margin: 0;
            background: var(--bg-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            color: var(--text-main);
            transition: background 0.5s ease;
        }
        .liquid-bg {
            position: fixed;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at 30% 30%, #e0c3fc 0%, var(--bg-color) 50%),
                        radial-gradient(circle at 70% 70%, #8ec5fc 0%, var(--bg-color) 50%);
            z-index: -1;
            filter: blur(80px);
            animation: flow 15s infinite alternate ease-in-out;
        }
        [data-theme="dark"] .liquid-bg {
            background: radial-gradient(circle at 30% 30%, #2c0b4a 0%, #000 50%),
                        radial-gradient(circle at 70% 70%, #0a2342 0%, #000 50%);
        }
        @keyframes flow { from { transform: rotate(0deg); } to { transform: rotate(15deg) scale(1.1); } }

        .tab-bar {
            position: sticky;
            top: env(safe-area-inset-top);
            z-index: 200;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-stroke);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            height: 48px;
            flex-shrink: 0;
            gap: 12px;
        }
        .tab-list {
            flex: 1;
            display: flex;
            overflow-x: auto;
            gap: 16px;
            padding-right: 160px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            scroll-snap-type: x proximity;
        }
        .tab-list::-webkit-scrollbar { display: none; }

        .tab-item {
            padding: 8px 14px;
            font-size: 17px;
            font-weight: 600;
            color: var(--text-main);
            white-space: nowrap;
            border-radius: 12px;
            background: rgba(150,150,150,0.08);
            border: 1px solid rgba(150,150,150,0.15);
            transition: all var(--tab-active-duration) ease, transform 0.15s ease;
            cursor: pointer;
        }

        .tab-item:hover { background: rgba(150,150,150,0.15); }

        .tab-item.active {
            background: var(--tab-active-bg);
            color: var(--ios-blue);
            border-color: var(--ios-blue);
            box-shadow: 0 2px 8px rgba(0,122,255,0.2);
        }

        .tab-item:active,
        .tab-item.clicked,
        .ios-item:active,
        .ios-item.clicked {
            transform: scale(0.92);
        }

        .tab-item,
        .ios-item {
            transition: transform 0.2s ease-out;
        }

        .tab-item.fixed.feedback-icon {
            background: transparent;
            border: none;
            box-shadow: none;
            min-width: 48px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            padding: 0 12px;
            color: var(--text-main);
        }

        .fixed-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            padding-left: 12px;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-6px); }
            40% { transform: translateX(6px); }
            60% { transform: translateX(-4px); }
            80% { transform: translateX(4px); }
            100% { transform: translateX(0); }
        }
        .shake { animation: shake 0.4s ease-in-out forwards; }

        #nav-container { flex: 1; position: relative; display: flex; flex-direction: column; overflow: hidden; }
        header { padding: 20px 24px 8px; transition: all 0.4s; }
        header h1 { font-size: 34px; font-weight: 700; margin: 0; letter-spacing: -1px; }
        header p { color: #8e8e93; font-size: 17px; margin: 5px 0 0; }
        .view-stack { flex: 1; position: relative; overflow: hidden; padding: 0 20px; }
        .step-view {
            position: absolute; inset: 0; overflow-y: auto;
            display: none; flex-direction: column;
            transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1), opacity 0.4s;
        }
        .step-view.active { display: flex; animation: slideIn 0.5s cubic-bezier(0.32, 0.72, 0, 1); }
        .step-view.exit { transform: translateX(-20%); opacity: 0; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px) saturate(180%);
            border-radius: 20px;
            border: 1px solid var(--glass-stroke);
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.05);
        }
        .ios-item, .back-btn, .reset-btn {
            padding: 18px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 0.5px solid rgba(150,150,150,0.1);
            cursor: pointer;
            transition: transform 0.15s ease, opacity 0.15s ease;
        }
        .ios-item:last-child { border-bottom: none; }
        .ios-item span { font-size: 19px; font-weight: 500; }
        .back-btn { color: var(--ios-blue); font-size: 17px; margin-bottom: 10px; }
        .reset-btn { margin-top: 30px; background: var(--text-main); color: var(--bg-color); padding: 16px; border-radius: 15px; text-align: center; font-weight: 600; }

        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .res-tile { background: rgba(150,150,150,0.1); padding: 15px; border-radius: 15px; }
        .res-val { font-size: 22px; font-weight: 700; color: var(--liquid-purple); }

        .feedback-form {
            background: var(--glass);
            backdrop-filter: blur(25px) saturate(180%);
            border-radius: 20px;
            border: 1px solid var(--glass-stroke);
            padding: 24px;
            margin-top: 16px;
        }
        .feedback-form label { display: block; font-size: 17px; font-weight: 600; margin: 20px 0 8px; }
        .feedback-form input, .feedback-form select, .feedback-form textarea {
            width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid var(--glass-stroke);
            background: rgba(255,255,255,0.3); font-size: 17px; color: var(--text-main); font-family: inherit;
        }
        [data-theme="dark"] .feedback-form input,
        [data-theme="dark"] .feedback-form select,
        [data-theme="dark"] .feedback-form textarea {
            background: rgba(40,40,40,0.5); border-color: rgba(255,255,255,0.2);
        }
        .feedback-form textarea { min-height: 160px; max-height: 45vh; resize: vertical; }
        .feedback-form button {
            margin-top: 24px; width: 100%; padding: 16px; background: var(--ios-blue); color: white;
            border: none; border-radius: 15px; font-size: 18px; font-weight: 600; cursor: pointer;
        }
        .feedback-form button:active { background: #0062cc; }

        .watermark {
            position: fixed; right: 8px; bottom: 8px; font-size: 8px; color: rgba(150,150,150,0.5);
            text-align: right; pointer-events: none; padding: 5px; max-width: 500px; line-height: 1.2; z-index: 10;
        }

        .theme-toggle-container {
            position: relative;
            width: 54px;
            height: 30px;
            background: #28a745;
            border-radius: 999px;
            cursor: pointer;
            transition: background 0.3s ease;
            flex-shrink: 0;
            margin-left: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .theme-toggle-container.off { background: #6c757d; }
        .theme-toggle-knob {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .theme-toggle-container.on .theme-toggle-knob { transform: translateX(24px); }
        [data-theme="dark"] .theme-toggle-container.off { background: #495057; }
        [data-theme="dark"] .theme-toggle-container.on { background: #2ecc71; }

        .coming-soon {
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 16px 32px;
            border-radius: 24px;
            font-size: 17px;
            font-weight: 500;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease, transform 0.6s ease;
            max-width: 90%;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
        }
        .coming-soon.show {
            opacity: 1;
            transform: translate(-50%, -50%) translateY(-10px);
        }
        [data-theme="dark"] .coming-soon {
            background: rgba(255, 255, 255, 0.9);
            color: #1c1c1e;
        }
    </style>
</head>
<body data-theme="light">
<div class="liquid-bg"></div>

<div class="tab-bar">
    <div class="tab-list">
        <div class="tab-item active" data-tab="shoe" onclick="clickFeedback(this, () => switchTab('shoe'))">é‹ç¢¼è½‰æ›</div>
        <div class="tab-item" data-tab="clothing" onclick="clickFeedback(this, () => switchTab('clothing'))">æœé£¾å°ºç¢¼è½‰æ›</div>
        <div class="tab-item" data-tab="product" onclick="clickFeedback(this, () => switchTab('product'))">ç”¢å“çŸ¥è­˜æŸ¥è©¢</div>
        <div class="tab-item" data-tab="todo" onclick="clickFeedback(this, () => switchTab('todo'))">å¾…é–‹ç™¼</div>
    </div>

    <div class="fixed-right">
        <div class="tab-item fixed feedback-icon" data-tab="feedback" onclick="clickFeedback(this, () => switchTab('feedback'))">ğŸ’¬</div>
        <div class="theme-toggle-container" id="themeToggle" onclick="toggleTheme()">
            <div class="theme-toggle-knob"></div>
        </div>
    </div>
</div>

<div id="nav-container">
    <header>
        <h1 id="title-text">è¥¿å¯§äºŒå°å·¥å…·</h1>
        <p id="sub-text">å®¢äººæä¾›çš„é‹æ¬¾é¡å‹</p>
    </header>
    <div class="view-stack">
        <div id="view1" class="step-view active">
            <div class="glass-card">
                <div class="ios-item" onclick="selectType('ç”·æ¬¾')"><span>ç”·æ¬¾</span></div>
                <div class="ios-item" onclick="selectType('å¥³æ¬¾')"><span>å¥³æ¬¾</span></div>
                <div class="ios-item" onclick="selectType('å…’ç«¥æ¬¾')"><span>å…’ç«¥æ¬¾</span></div>
            </div>
        </div>
        <div id="view2" class="step-view">
            <div class="back-btn" onclick="goBack(1)"> ä¸Šä¸€é ...å— æ˜¯å§</div>
            <div class="glass-card" id="unit-list"></div>
        </div>
        <div id="view3" class="step-view">
            <div class="back-btn" onclick="goBack(2)"> é€™ç¢ºå®šæˆ‘ä¿è­‰æ˜¯ä¸Šä¸€é </div>
            <div class="glass-card" id="value-list"></div>
        </div>
        <div id="view4" class="step-view">
            <div class="glass-card" style="padding:25px; text-align:center;">
                <div id="result-content"></div>
                <div class="reset-btn" onclick="goBack(1)">ä½ é‚„å¯ä»¥å†ä¾†ä¸€æ¬¡</div>
            </div>
        </div>

        <div id="view5" class="step-view">
            <div class="feedback-form">
                <h2 style="margin-top:0; color:var(--liquid-purple)">æ„è¦‹å›é¥‹</h2>
                
                <label for="empId">å“¡ç·¨ (ä¾‹: AB1234)</label>
                <input type="text" id="empId" maxlength="6" placeholder="è«‹è¼¸å…¥ 2 è‹±æ–‡å­—æ¯ + 4 æ•¸å­—" autocomplete="off">

                <label for="feedbackType">æ„è¦‹é …ç›®</label>
                <select id="feedbackType">
                    <option value="">è«‹é¸æ“‡</option>
                    <option value="æ·»åŠ åŠŸèƒ½">æ·»åŠ åŠŸèƒ½</option>
                    <option value="æ·»åŠ å°ºå¯¸/æ¬¾å¼/å–®ä½">æ·»åŠ å°ºå¯¸\æ¬¾å¼\å–®ä½</option>
                    <option value="ä½¿ç”¨æ™‚ç™¼ç”ŸéŒ¯èª¤å›å ±">ä½¿ç”¨æ™‚ç™¼ç”ŸéŒ¯èª¤å›å ±</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>

                <label for="feedbackContent">æ„è¦‹å›å ±è¼¸å…¥</label>
                <textarea id="feedbackContent" placeholder="è«‹å…ˆé¸æ“‡æ„è¦‹é …ç›®"></textarea>

                <button onclick="submitFeedback()">é€å‡ºå›é¥‹</button>
            </div>
        </div>

        <!-- æ–°å¢ï¼šç”¢å“çŸ¥è­˜æŸ¥è©¢é é¢ -->
        <div id="view6" class="step-view">
            <div class="back-btn" onclick="goBack(1)">â† è¿”å›ä¸»é </div>
            <div class="glass-card" style="padding: 30px; text-align: center;">
                <h2 style="margin: 0 0 30px; color: var(--liquid-purple);">Nike ç”¢å“çŸ¥è­˜æŸ¥è©¢</h2>
                
                <form id="nikeSearchForm">
                    <div style="margin: 25px 0; font-size: 19px; font-weight: 500;">
                        <label style="margin-right: 40px; cursor: pointer;">
                            <input type="radio" name="gender" value="ç”·æ¬¾" checked> ç”·æ¬¾
                        </label>
                        <label style="cursor: pointer;">
                            <input type="radio" name="gender" value="å¥³æ¬¾"> å¥³æ¬¾
                        </label>
                    </div>
                    
                    <input type="text" id="productKeyword" placeholder="è¼¸å…¥ç”¢å“åç¨±æˆ–é—œéµå­— (ä¾‹å¦‚ï¼šAir Force 1ã€Dunk Lowã€Zoom Fly)" required
                           style="width: 100%; padding: 16px; font-size: 17px; border-radius: 12px; border: 1px solid var(--glass-stroke); background: var(--glass); color: var(--text-main); margin-bottom: 25px;">
                    
                    <button type="submit" style="width: 100%; padding: 18px; background: var(--ios-blue); color: white; border: none; border-radius: 15px; font-size: 18px; font-weight: 600; cursor: pointer;">
                        æŸ¥è©¢ Nike å°ç£å®˜ç¶²
                    </button>
                </form>
                
                <p style="margin-top: 25px; font-size: 14px; opacity: 0.7;">
                    å°‡è‡ªå‹•åœ¨æ–°åˆ†é é–‹å•Ÿ Nike å®˜æ–¹æœå°‹çµæœ<br>ï¼ˆè‹¥çµæœä¸ç²¾æº–ï¼Œå¯è©¦åŠ æ›´å¤šæè¿°è©<br> 
                    æš«æ™‚ç‚ºNikeå®˜ç¶²çµæœ<br> æ—¥å¾Œå°‡æœƒä½¿ç”¨å°è³´çš„ç­†è¨˜å’Œæ•´ç†<br> 
                    åšç‚ºç”¢å“çŸ¥è­˜æŸ¥è©¢çš„ä¾æ“š<br> å„ä½æ”¾å¿ƒ<br> æœƒçµ¦å°ˆæ¥­äººå£«æª¢æŸ¥éçš„
                
                </p>
            </div>
        </div>
    </div>
</div>

<div class="watermark">
    è©²ç¶²ç«™æ‰€æœ‰ä»£ç¢¼çš†ç‚ºAIç”Ÿæˆå¾Œæ ¡æ­£<br>
    å¦‚æœ‰ä»»ä½•å›é¥‹\å»ºè­°è«‹é»æ“Šå³ä¸Šçš„ğŸ’¬<br>
    ShoesTrans v.2 Made by Lai_0827(NiXkMoXXXtum_XN2)<br>
</div>

<script>
const sizeData = {
    "ç”·æ¬¾": [{US:4, UK:3.5, EUR:36, CM:23}, {US:4.5, UK:4, EUR:36.5, CM:23.5}, {US:5, UK:4.5, EUR:37.5, CM:23.5}, {US:5.5, UK:5, EUR:38, CM:24}, {US:6, UK:5, EUR:38.5, CM:24}, {US:6.5, UK:5.5, EUR:39, CM:24.5}, {US:7, UK:6, EUR:40, CM:25}, {US:7.5, UK:6.5, EUR:40.5, CM:25.5}, {US:8, UK:7, EUR:41, CM:26}, {US:8.5, UK:7.5, EUR:42, CM:26.5}, {US:9, UK:8, EUR:42.5, CM:27}, {US:9.5, UK:8.5, EUR:43, CM:27.5}, {US:10, UK:9, EUR:44, CM:28}, {US:10.5, UK:9.5, EUR:44.5, CM:28.5}, {US:11, UK:10, EUR:45, CM:29}, {US:11.5, UK:10.5, EUR:45.5, CM:29.5}, {US:12, UK:11, EUR:46, CM:30}, {US:12.5, UK:11.5, EUR:47, CM:30.5}],
    "å¥³æ¬¾": [{US:5, UK:2.5, EUR:35.5, CM:22}, {US:5.5, UK:3, EUR:36, CM:22.5}, {US:6, UK:3.5, EUR:36.5, CM:23}, {US:6.5, UK:4, EUR:37.5, CM:23.5}, {US:7, UK:4.5, EUR:38, CM:24}, {US:7.5, UK:5, EUR:38.5, CM:24.5}, {US:8, UK:5.5, EUR:39, CM:25}, {US:8.5, UK:6, EUR:40, CM:25.5}, {US:9, UK:6.5, EUR:40.5, CM:26}, {US:10, UK:7.5, EUR:42, CM:27}],
    "å…’ç«¥æ¬¾": [
        {US:"1C", UK:0.5,   EUR:16,    CM:7},
        {US:"2C", UK:1.5,   EUR:17,    CM:8},
        {US:"3C", UK:2.5,   EUR:18.5,  CM:9},
        {US:"4C", UK:3.5,   EUR:19.5,  CM:10},
        {US:"5C", UK:4.5,   EUR:21,    CM:11},
        {US:"6C", UK:5.5,   EUR:22,    CM:12},
        {US:"7C", UK:6.5,   EUR:23.5,  CM:13},
        {US:"8C", UK:7.5,   EUR:25,    CM:14},
        {US:"9C", UK:8.5,   EUR:26,    CM:15},
        {US:"10C",UK:9.5,   EUR:27,    CM:16},
        {US:"11C",UK:10.5,  EUR:28,    CM:17},
        {US:"12C",UK:11.5,  EUR:29.5,  CM:18},
        {US:"13C",UK:12.5,  EUR:31,    CM:19},
        {US:"1Y", UK:13.5,  EUR:32,    CM:20},
        {US:"2Y", UK:1.5,   EUR:33.5,  CM:20.5},
        {US:"3Y", UK:2.5,   EUR:35,    CM:22},
        {US:"3.5Y",UK:3,    EUR:35.5,  CM:22.5},
        {US:"4Y", UK:3.5,   EUR:36,    CM:23},
        {US:"4.5Y",UK:4,    EUR:36.5,  CM:23.5},
        {US:"5Y", UK:4.5,   EUR:37,    CM:23.5},
        {US:"5.5Y",UK:5,    EUR:37.5,  CM:24},
        {US:"6Y", UK:5.5,   EUR:38.5,  CM:24},
        {US:"6.5Y",UK:6,    EUR:39,    CM:24.5},
        {US:"7Y", UK:6,     EUR:40,    CM:25}
    ]
};
let currentSelection = { type: '', unit: '', value: '' };

// ä¸»é¡Œ
function initTheme() {
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.body.setAttribute('data-theme', savedTheme);
    
    const toggle = document.getElementById('themeToggle');
    if (toggle) {
        toggle.classList.toggle('on', savedTheme === 'dark');
        toggle.classList.toggle('off', savedTheme !== 'dark');
    }
}

function toggleTheme() {
    const current = document.body.getAttribute('data-theme');
    const next = current === 'light' ? 'dark' : 'light';
    document.body.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    
    const toggle = document.getElementById('themeToggle');
    if (toggle) {
        toggle.classList.toggle('on', next === 'dark');
        toggle.classList.toggle('off', next !== 'dark');
    }
}

// é»æ“Šåé¥‹ï¼ˆåªç¸®æ”¾ï¼Œä¸éœ‡å‹•ï¼‰
function clickFeedback(el, callback) {
    if (!el) {
        if (callback) callback();
        return;
    }

    const tab = el.getAttribute('data-tab');

    // å·²å®Œæˆçš„åŠŸèƒ½ï¼šshoe, feedback, product â†’ åªç¸®æ”¾
    if (tab === 'shoe' || tab === 'feedback' || tab === 'product') {
        el.classList.add('clicked');
        setTimeout(() => {
            el.classList.remove('clicked');
            if (callback) callback();
        }, 200);
    } 
    // é–‹ç™¼ä¸­ï¼šclothing, todo â†’ éœ‡å‹•
    else {
        el.classList.add('shake');
        setTimeout(() => {
            el.classList.remove('shake');
            if (callback) callback();
        }, 400);
    }
}

// é‹ç¢¼é‚è¼¯ï¼ˆåŸåŠŸèƒ½ä¸è®Šï¼‰
function selectType(type) {
    currentSelection.type = type;
    const units = type === "å…’ç«¥æ¬¾" ? ["US", "UK", "EUR", "CM"] : ["US", "UK", "EUR", "CM"];
    document.getElementById('unit-list').innerHTML = units.map(u => `<div class="ios-item" onclick="selectUnit('${u}')"><span>${u}</span></div>`).join('');
    navigateTo(2, "é‚£å®¢äººæ˜¯ç”¨ç”šéº¼å–®ä½å‘¢", "ä¸‹é¢é¸ä¸€å€‹å¥½å—~");
}

function selectUnit(unit) {
    currentSelection.unit = unit;
    const values = [...new Set(sizeData[currentSelection.type].map(item => item[unit]))];
    document.getElementById('value-list').innerHTML = values.map(v => `<div class="ios-item" onclick="selectValue('${v}')"><span>${v}</span></div>`).join('');
    navigateTo(3, `åŸä¾†å¦‚æ­¤ æ˜¯ ${unit}å•Š`, "è«‹çµ¦æˆ‘å®¢äººçš„å°ºç¢¼Please~");
}

function selectValue(val) {
    const target = sizeData[currentSelection.type].find(item => String(item[currentSelection.unit]) === String(val));
    if (target) {
        let html = `<h2 style="margin-top:0; color:var(--liquid-purple)">âœ… ${currentSelection.type}</h2><div class="res-grid">`;
        html += `<div class="res-tile"><span style="font-size:12px;opacity:0.6">US</span><br><span class="res-val">${target.US}</span></div>`;
        html += `<div class="res-tile"><span style="font-size:12px;opacity:0.6">UK</span><br><span class="res-val">${target.UK !== undefined ? target.UK : '-'}</span></div>`;
        html += `<div class="res-tile"><span style="font-size:12px;opacity:0.6">EUR</span><br><span class="res-val">${target.EUR}</span></div>`;
        html += `<div class="res-tile"><span style="font-size:12px;opacity:0.6">CM</span><br><span class="res-val">${target.CM}</span></div>`;
        html += `</div>`;

        if (currentSelection.type !== "å…’ç«¥æ¬¾") {
            let sockSize = 'ç„¡æ³•åˆ¤æ–·';
            const cm = parseFloat(target.CM);
            if (!isNaN(cm)) {
                if (cm >= 21 && cm <= 23.9) sockSize = 'S';
                else if (cm >= 24 && cm <= 24.9) sockSize = 'S\\M';
                else if (cm >= 25 && cm <= 26.9) sockSize = 'M';
                else if (cm >= 27 && cm <= 27.9) sockSize = 'M\\L';
                else if (cm >= 28 && cm <= 29.9) sockSize = 'L';
                else if (cm >= 30 && cm <= 30.9) sockSize = 'L\\XL';
                else if (cm >= 31 && cm <= 33) sockSize = 'XL';
                else sockSize = 'è¶…å‡ºå¸¸è¦‹ç¯„åœ';
            }

            html += `
                <div style="margin-top: 20px; padding: 16px; background: rgba(150,150,150,0.1); border-radius: 12px; text-align: center;">
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">é©åˆè¥ªå­å°ºå¯¸</div>
                    <div style="font-size: 32px; font-weight: 700; color: var(--liquid-purple);">${sockSize}</div>
                    <div style="font-size: 14px; opacity: 0.7; margin-top: 4px;">(ç”·å¥³é€šç”¨)</div>
                </div>
            `;
        }

        document.getElementById('result-content').innerHTML = html;
        navigateTo(4, "æ°´å–”!ä¸€æ¬¡é è½‰æˆåŠŸäº†", "æ‰€ä»¥ç­”æ¡ˆå°±æ˜¯");
    }
}

function navigateTo(step, title, sub) {
    document.querySelectorAll('.step-view').forEach(v => { v.classList.remove('active'); v.classList.remove('exit'); });
    setTimeout(() => {
        document.getElementById('view' + step).classList.add('active');
        document.getElementById('title-text').innerText = title;
        document.getElementById('sub-text').innerText = sub;
    }, 100);
}

function goBack(step) {
    const titles = ["", "è¥¿å¯§äºŒå°å·¥å…·", "é‚£å®¢äººæ˜¯ç”¨ç”šéº¼å–®ä½å‘¢", "å®¢äººçš„å°ºç¢¼å‘¢~"];
    navigateTo(step, titles[step], "é‚£ä½ å†é¸ä¸€æ¬¡");
}

// tab åˆ‡æ›
function switchTab(tab) {
    document.querySelectorAll('.step-view').forEach(v => {
        v.classList.remove('active');
    });

    document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));

    if (tab === 'shoe') {
        currentSelection = { type: '', unit: '', value: '' };
        navigateTo(1, "è¥¿å¯§äºŒå°å·¥å…·", "å®¢äººæä¾›çš„é‹æ¬¾é¡å‹");
        document.querySelector('.tab-item[data-tab="shoe"]').classList.add('active');
    } 
    else if (tab === 'feedback') {
        document.getElementById('view5').classList.add('active');
        document.getElementById('title-text').innerText = "æ„è¦‹å›é¥‹";
        document.getElementById('sub-text').innerText = "å‘Šè¨´æˆ‘å€‘ä½ çš„æƒ³æ³•å§~";
        document.querySelector('.tab-item[data-tab="feedback"]').classList.add('active');
    } 
    else if (tab === 'product') {
        document.getElementById('view6').classList.add('active');
        document.getElementById('title-text').innerText = "ç”¢å“çŸ¥è­˜æŸ¥è©¢";
        document.getElementById('sub-text').innerText = "è¼¸å…¥æƒ³æŸ¥çš„ Nike ç”¢å“å§ï½";
        document.querySelector('.tab-item[data-tab="product"]').classList.add('active');

        const nikeForm = document.getElementById('nikeSearchForm');
        if (nikeForm && !nikeForm.dataset.bound) {
            nikeForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const gender = document.querySelector('input[name="gender"]:checked')?.value || 'ç”·æ¬¾';
                let keyword = document.getElementById('productKeyword')?.value.trim();
                
                if (!keyword) {
                    alert('è«‹è¼¸å…¥ç”¢å“åç¨±æˆ–é—œéµå­—ï¼');
                    return;
                }
                
                const searchQuery = `${gender} ${keyword}`;
                const nikeUrl = `https://www.nike.com/tw/w?q=${encodeURIComponent(searchQuery)}&vst=${encodeURIComponent(searchQuery)}`;
                
                window.open(nikeUrl, '_blank');
            });
            nikeForm.dataset.bound = 'true';
        }
    } 
    else {
        showComingSoon(tab);
        // å¯é¸ï¼šä¿æŒ shoe tab active
        document.querySelector('.tab-item[data-tab="shoe"]').classList.add('active');
    }
}

function showComingSoon(tab) {
    const old = document.querySelector('.coming-soon');
    if (old) old.remove();

    const div = document.createElement('div');
    div.className = 'coming-soon';

    let message = '';
    if (tab === 'clothing') {
        message = 'å› é–‹ç™¼æœªå®Œå–„æ•…æš«ä¸å…¬é–‹';
    } else if (tab === 'todo') {
        div.innerHTML = `æˆ‘å°±èªªå¾…é–‹ç™¼<br>ä½ æ‰‹è³¤æ˜¯ä¸æ˜¯?`;
    } else {
        message = 'åŠŸèƒ½é–‹ç™¼ä¸­';
    }

    if (message) div.textContent = message;

    document.body.appendChild(div);
    div.offsetHeight;
    div.classList.add('show');

    setTimeout(() => {
        div.classList.remove('show');
        setTimeout(() => div.remove(), 600);
    }, 1500);
}

// æ„è¦‹å›é¥‹é‚è¼¯
document.getElementById('empId')?.addEventListener('input', e => {
    let v = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    if (v.length > 6) v = v.slice(0,6);
    e.target.value = v;
});

document.getElementById('feedbackType')?.addEventListener('change', function() {
    const t = this.value;
    const ta = document.getElementById('feedbackContent');
    const ph = {
        "æ·»åŠ åŠŸèƒ½": "æ·»åŠ åŠŸèƒ½, è«‹è¼¸å…¥åŠŸèƒ½å»ºè­°",
        "æ·»åŠ å°ºå¯¸/æ¬¾å¼/å–®ä½": "æ·»åŠ å°ºå¯¸\\æ¬¾å¼\\å–®ä½, è«‹è¼¸å…¥å°ºå¯¸\\æ¬¾å¼\\å–®ä½å»ºè­°",
        "ä½¿ç”¨æ™‚ç™¼ç”ŸéŒ¯èª¤å›å ±": "ä½¿ç”¨æ™‚ç™¼ç”ŸéŒ¯èª¤å›å ±, è«‹è¼¸å…¥ä½ ä½¿ç”¨æ™‚é‡åˆ°çš„å•é¡Œ",
        "å…¶ä»–": "å…¶ä»–, è«‹è¼¸å…¥ä½ æƒ³å›é¥‹çš„å…§å®¹"
    };
    ta.placeholder = ph[t] || "è«‹å…ˆé¸æ“‡æ„è¦‹é …ç›®";
});

function submitFeedback() {
    const id = document.getElementById('empId').value.trim();
    const type = document.getElementById('feedbackType').value;
    const content = document.getElementById('feedbackContent').value.trim();

    if (!id || id.length !== 6 || !/^[A-Z]{2}\d{4}$/.test(id)) {
        alert("å“¡ç·¨æ ¼å¼éŒ¯èª¤ï¼è«‹è¼¸å…¥ 2 å€‹å¤§å¯«è‹±æ–‡å­—æ¯ + 4 ä½æ•¸å­—ï¼Œä¾‹å¦‚ AB1234");
        return;
    }
    if (!type) { alert("è«‹é¸æ“‡æ„è¦‹é …ç›®ï¼"); return; }
    if (!content) { alert("è«‹è¼¸å…¥å›é¥‹å…§å®¹ï¼"); return; }

    const iframe = document.createElement('iframe');
    iframe.name = 'hiddenIframe';
    iframe.style.display = 'none';
    document.body.appendChild(iframe);

    const form = document.createElement('form');
    form.method = 'POST';
    form.action = 'https://docs.google.com/forms/d/e/1FAIpQLSdfSjVGxBCS0x2v8f3FzGXKiJTMygDpKhV2ZqAu1wXYYSjvvw/formResponse';
    form.target = 'hiddenIframe';

    const addField = (name, value) => {
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = name;
        input.value = value;
        form.appendChild(input);
    };

    addField('entry.535338149', id);
    addField('entry.279485988', type);
    addField('entry.1394457056', content);

    document.body.appendChild(form);
    form.submit();

    setTimeout(() => {
        alert("æ„Ÿè¬ä½ çš„å›é¥‹ï¼å·²æˆåŠŸé€å‡ºï½\nå°è³´æœƒèªçœŸçœ‹çš„å–” :D");
        document.getElementById('empId').value = '';
        document.getElementById('feedbackType').value = '';
        document.getElementById('feedbackContent').value = '';
        document.getElementById('feedbackContent').placeholder = "è«‹å…ˆé¸æ“‡æ„è¦‹é …ç›®";
        
        document.body.removeChild(iframe);
        document.body.removeChild(form);
    }, 1000);
}

// åˆå§‹åŒ–
initTheme();
window.addEventListener('load', () => {
    switchTab('shoe');
});
</script>
</body>
</html>
